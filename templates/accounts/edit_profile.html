{% extends 'base.html' %}

{% block title %}Edit Profile - RecipeShare{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-lg shadow-lg p-8">
        <h1 class="text-4xl font-bold text-red-800 mb-6">
            <i class="fa fa-edit"></i> Edit Profile
        </h1>
        
        <form method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            
            {% if form.non_field_errors %}
                <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                    {{ form.non_field_errors }}
                </div>
            {% endif %}
            
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">
                    <i class="fa fa-user"></i> Username
                </label>
                <input 
                    type="text" 
                    value="{{ user.username }}" 
                    disabled
                    class="w-full px-4 py-2 border rounded-lg bg-gray-100 cursor-not-allowed"
                >
                <p class="text-sm text-gray-500 mt-1">Username cannot be changed</p>
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">
                    <i class="fa fa-envelope"></i> {{ form.email.label }}
                </label>
                {{ form.email }}
                {% if form.email.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.email.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">
                    <i class="fa fa-align-left"></i> {{ form.bio.label }}
                </label>
                {{ form.bio }}
                {% if form.bio.help_text %}
                    <p class="text-sm text-gray-500 mt-1">{{ form.bio.help_text }}</p>
                {% endif %}
                {% if form.bio.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.bio.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="mb-6">
                <label class="block text-gray-700 font-bold mb-2">
                    <i class="fa fa-camera"></i> {{ form.profile_pic.label }}
                </label>
                
                {% if user.profile_pic %}
                    <div class="mb-3">
                        <p class="text-sm text-gray-600 mb-2">Current profile picture:</p>
                        <img src="{{ user.profile_pic.url }}" alt="{{ user.username }}" class="w-32 h-32 rounded-full object-cover border-4 border-yellow-500">
                        <p class="text-sm text-gray-500 mt-2">Upload a new image to replace it (optional)</p>
                    </div>
                {% else %}
                    <div class="mb-3">
                        <div class="w-32 h-32 rounded-full bg-yellow-500 flex items-center justify-center text-red-800 text-4xl font-bold border-4 border-red-800">
                            {{ user.username|first|upper }}
                        </div>
                        <p class="text-sm text-gray-500 mt-2">No profile picture set</p>
                    </div>
                {% endif %}
                
                {{ form.profile_pic }}
                {% if form.profile_pic.help_text %}
                    <p class="text-sm text-gray-500 mt-1">{{ form.profile_pic.help_text }}</p>
                {% endif %}
                {% if form.profile_pic.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.profile_pic.errors.0 }}</p>
                {% endif %}
            </div>
            
            <div class="flex gap-4">
                <button 
                    type="submit"
                    class="flex-1 bg-yellow-500 text-red-800 py-3 px-6 rounded-lg font-bold hover:bg-yellow-600 transition"
                >
                    <i class="fa fa-save"></i> Save Changes
                </button>
                
                <a 
                    href="/profile/" 
                    class="flex-1 bg-gray-300 text-gray-800 py-3 px-6 rounded-lg font-bold hover:bg-gray-400 transition text-center"
                >
                    <i class="fa fa-times"></i> Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}